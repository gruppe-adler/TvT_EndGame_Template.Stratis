params ["_type","_pos",["_delay",120]];

private _closestTown = nearestLocation [_pos,"NameCity"];
private _closestVillage = nearestLocation [_pos,"NameVillage"];

private _distanceTown = _closestTown distance _pos;
private _distanceVillage = _closestVillage distance _pos;
private _distance = 0;
private _text = "";

if (_distanceTown < _distanceVillage) then {
	_distance = floor ((position _closestTown) distance _pos);
	_delay = _distance / 10;
	_text = format ["Distance of %3 civ to next town %2 is %1, delay is  secs.",_distance,text _closestTown,_type];
} else {
	_distance = floor ((position _closestVillage) distance _pos);
	_delay = _distance / 10;
	_text = format ["Distance of %3 civ to next village %2 is %1, delay is %3 secs.",_distance,text _closestVillage,_type];
};

if (_type == "killed") then {
	diag_log format ["%1, delay is %2 secs.", _delay];
	[{
		[_this,true] spawn grad_civNotifications_fnc_createMarker;
		[true] spawn grad_civNotifications_fnc_showHint;
	},_pos,_delay] call CBA_fnc_waitAndExecute;
}else{
	diag_log format ["%1, delay is %2 secs.", (_delay/2);
	[{
		[_this,false] spawn grad_civNotifications_fnc_createMarker;
		[false] spawn grad_civNotifications_fnc_showHint;
	},_pos,(_delay/2)] call CBA_fnc_waitAndExecute;
};
